<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Personal Expense Tracker</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.min.css">
  <style>
    body {
      background-color: #f8f9fa;
    }
    .navbar {
      background-color: #dc3545;
    }
    .card {
      border-radius: 12px;
      box-shadow: 0 3px 6px rgba(0,0,0,0.1);
    }
    .summary-box {
      background-color: #ffe8e8;
      border-left: 4px solid #dc3545;
    }
    .btn-custom {
      background-color: #dc3545;
      color: white;
    }
    .btn-custom:hover {
      background-color: #c82333;
    }
  </style>
</head>
<body>
  <nav class="navbar navbar-dark text-white px-3">
    <h4 class="m-0">ðŸ’° Personal Expense Tracker</h4>
  </nav>

  <div class="container mt-4">
    <!-- Add Expense Form -->
    <div class="card p-3 mb-4">
      <h5>Add New Expense</h5>
      <form id="expenseForm" class="row g-3">
        <div class="col-md-3">
          <label class="form-label">Amount (â‚¹)</label>
          <input type="number" id="amount" class="form-control" required />
        </div>
        <div class="col-md-3">
          <label class="form-label">Date</label>
          <input type="date" id="date" class="form-control" required />
        </div>
        <div class="col-md-3">
          <label class="form-label">Category</label>
          <select id="category" class="form-select" required>
            <option value="">Select</option>
            <option value="Food">Food</option>
            <option value="Travel">Travel</option>
            <option value="Bills">Bills</option>
            <option value="Shopping">Shopping</option>
            <option value="Other">Other</option>
          </select>
        </div>
        <div class="col-md-3">
          <label class="form-label">Note</label>
          <input type="text" id="note" class="form-control" placeholder="Description" />
        </div>
        <div class="col-12 text-end">
          <button type="submit" class="btn btn-custom mt-2"><i class="bi bi-plus-circle"></i> Add Expense</button>
        </div>
      </form>
    </div>

    <!-- Expense List -->
    <div class="card p-3">
      <h5 class="mb-3">Expense List</h5>
      <table class="table table-striped" id="expenseTable">
        <thead class="table-danger">
          <tr>
            <th>#</th>
            <th>Date</th>
            <th>Category</th>
            <th>Note</th>
            <th>Amount (â‚¹)</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <!-- Summary -->
    <div class="summary-box mt-4 p-3 rounded">
      <h5>Summary</h5>
      <p>Total Spent: â‚¹<span id="totalSpent">0</span></p>
      <div id="categorySummary"></div>
    </div>
  </div>

  <script>
    let expenses = JSON.parse(localStorage.getItem("expenses")) || [];

    const form = document.getElementById("expenseForm");
    const tableBody = document.querySelector("#expenseTable tbody");
    const totalSpent = document.getElementById("totalSpent");
    const categorySummary = document.getElementById("categorySummary");

    function renderTable() {
      tableBody.innerHTML = "";
      let total = 0;
      let catTotals = {};

      expenses.forEach((exp, index) => {
        total += parseFloat(exp.amount);
        catTotals[exp.category] = (catTotals[exp.category] || 0) + parseFloat(exp.amount);

        const row = document.createElement("tr");
        row.innerHTML = `
          <td>${index + 1}</td>
          <td>${exp.date}</td>
          <td>${exp.category}</td>
          <td>${exp.note}</td>
          <td>â‚¹${exp.amount}</td>
          <td>
            <button class="btn btn-sm btn-outline-primary me-2" onclick="editExpense(${index})"><i class="bi bi-pencil"></i></button>
            <button class="btn btn-sm btn-outline-danger" onclick="deleteExpense(${index})"><i class="bi bi-trash"></i></button>
          </td>`;
        tableBody.appendChild(row);
      });

      totalSpent.textContent = total.toFixed(2);

      // category summary
      categorySummary.innerHTML = "";
      for (const [cat, amt] of Object.entries(catTotals)) {
        categorySummary.innerHTML += `<p>${cat}: â‚¹${amt.toFixed(2)}</p>`;
      }

      localStorage.setItem("expenses", JSON.stringify(expenses));
    }

    form.addEventListener("submit", (e) => {
      e.preventDefault();
      const newExpense = {
        amount: parseFloat(document.getElementById("amount").value),
        date: document.getElementById("date").value,
        category: document.getElementById("category").value,
        note: document.getElementById("note").value || "-"
      };
      expenses.push(newExpense);
      renderTable();
      form.reset();
    });

    function deleteExpense(index) {
      if (confirm("Delete this expense?")) {
        expenses.splice(index, 1);
        renderTable();
      }
    }

    function editExpense(index) {
      const exp = expenses[index];
      document.getElementById("amount").value = exp.amount;
      document.getElementById("date").value = exp.date;
      document.getElementById("category").value = exp.category;
      document.getElementById("note").value = exp.note;
      expenses.splice(index, 1);
      renderTable();
    }

    renderTable();
  </script>
</body>
</html>
